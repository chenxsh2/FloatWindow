def sdkBaseName = project.name
def cusSavePath = "../../MyFirstApplication/libs"

task buildJar(dependsOn: ['assembleDebug'], type: Jar) {

    baseName = sdkBaseName
    version = ""
    extension = "jar"

    // 原目录为 "/intermediates/classes/debug"
    // 新目录为 "/intermediates/javac/debug/classes"
    // 现目录
    def sourceCls = [project.buildDir.absolutePath
                             + "/intermediates/javac/debug/compileDebugJavaWithJavac/classes"]
    from sourceCls

    exclude "**/BuildConfig.class"
    exclude "**/BuildConfig\$*.class"
    exclude "**/R.class"
    exclude "**/R\$*.class"

    setDestinationDir(new File(cusSavePath))
}

task buildProguardJar(dependsOn: ['assembleRelease'], type: Copy) {
    def sourceCls = [project.buildDir.absolutePath + "/intermediates/bundles/release/classes.jar"]
    from sourceCls

    def v = ""
    into cusSavePath
    rename {
        sdkBaseName + '-' + v + "-proguarded.jar"
    }
}